<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>数据响应式原理Proxy</title>
</head>
<body>
<div class="app">
    hello
</div>
<script>
    //Proxy是ES6新增的，可以直接监听对象，而不像defineProperty只能监听对象的某一个属性，这个也解决了defineProperty
    // 监听多个成员的问题
    let data = {
        msg: 'hello',
        count:0
    }
    //new Proxy 会创建目标对象的代理对象，这样不会改变目标对象的数据
    let vm = new Proxy(data,{
        get(target, key) {
            console.log('get,key:',key,target[key])
            return target[key]
        },
        set(target, key, value) {
            console.log('set,key:',key,value)
            if (target[key] === value){
                return
            }
            target[key] = value;
            document.querySelector('.app').textContent = target[key]
        }
    })
    vm.msg = 'Hello world'
    console.log(vm.msg)
</script>
</body>
</html>
